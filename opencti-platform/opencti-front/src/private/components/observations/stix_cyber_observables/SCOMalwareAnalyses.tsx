import React, { FunctionComponent } from 'react';
import { graphql } from 'react-relay';
import List from '@mui/material/List';
import ListItemIcon from '@mui/material/ListItemIcon';
import Skeleton from '@mui/material/Skeleton';
import ListItemText from '@mui/material/ListItemText';
import ListItem from '@mui/material/ListItem';
import makeStyles from '@mui/styles/makeStyles';
import { Theme } from '../../../../components/Theme';
import { SCOMalwareAnalysesQuery } from './__generated__/SCOMalwareAnalysesQuery.graphql';
import useQueryLoading from '../../../../utils/hooks/useQueryLoading';

const useStyles = makeStyles<Theme>((theme) => (
  {
    itemIcon: { color: theme.palette.primary.main },
  }));
export const SCOMalwareAnalyses: FunctionComponent = () => {
  const classes = useStyles();

  const query = graphql`
        query SCOMalwareAnalysesQuery(
            $filters: [MalwareAnalysesFiltering!]
        ) {
            malwareAnalyses(filters: $filters) {
                edges {
                    node {
                        result_name
                    }
                }
            }
        }
    `;
  const filters = {};
  const queryRef = useQueryLoading<SCOMalwareAnalysesQuery>(query, filters);
  return (
    <List>
        {queryRef && (
            <React.Suspense fallback={
                <>{Array(3).fill(0).map((index) => (
                    <ListItem
                        key={index}
                        dense={true}
                        divider={true}
                    >
                        <ListItemIcon classes={{ root: classes.itemIcon }}>
                            <Skeleton
                                animation="wave"
                                variant="circular"
                                width={30}
                                height={30}
                            />
                        </ListItemIcon>
                        <ListItemText
                            primary={
                                <Skeleton
                                    animation="wave"
                                    variant="rectangular"
                                    width="90%"
                                    height={15}
                                    style={{ marginBottom: 10 }}
                                />
                            }
                            secondary={
                                <Skeleton
                                    animation="wave"
                                    variant="rectangular"
                                    width="90%"
                                    height={15}
                                />
                            }
                        />
                    </ListItem>
                ))}</>
            } >
            </React.Suspense>
        )}
    </List>
  );
};
